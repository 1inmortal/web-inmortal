import React, { useEffect, useRef } from 'react';
import './styles.css';

const BODY_HTML = "<div class=\"layer-fixed overlay-fx\"></div>\r\n\r\n    \r\n    <div class=\"layer-fixed hud-layer\">\r\n        <div class=\"absolute left-0 top-0 h-full w-1 bg-white/10\">\r\n            <div class=\"hud-bar\" id=\"progress-bar\"></div>\r\n        </div>\r\n\r\n        <div class=\"flex justify-between w-full uppercase text-[10px] tracking-[0.2em] opacity-70\">\r\n            <span>The Vault</span>\r\n            <span id=\"scene-indicator\">Sector 00: Access</span>\r\n            <span>Class: Classified</span>\r\n        </div>\r\n\r\n        \r\n        <div class=\"absolute bottom-8 right-8 pointer-events-auto\">\r\n            <button id=\"skip-btn\" class=\"text-xs border border-white/20 px-4 py-2 hover:bg-white hover:text-black transition-colors hidden\">\r\n                SKIP SEQUENCE ->\r\n            </button>\r\n        </div>\r\n    </div>\r\n\r\n    \r\n    <div id=\"preloader\" class=\"fixed inset-0 z-[1100] bg-black flex flex-col items-center justify-center\">\r\n        <div class=\"font-display text-4xl font-bold mb-4 tracking-tighter\">\r\n            TITAN<span class=\"text-[var(--accent)]\">X1</span>\r\n        </div>\r\n        <div class=\"w-64 h-1 bg-gray-900 rounded overflow-hidden\">\r\n            <div id=\"loader-line\" class=\"h-full bg-[var(--accent)] w-0 shadow-[0_0_10px_var(--accent)]\"></div>\r\n        </div>\r\n        <div class=\"mt-4 font-mono text-xs text-gray-500\" id=\"loader-text\">\r\n            INITIALIZING NEURAL LINK...\r\n        </div>\r\n        \r\n        <button id=\"enter-btn\" class=\"mt-8 px-8 py-3 border border-[var(--accent)] text-[var(--accent)] font-bold tracking-widest uppercase opacity-0 pointer-events-none hover:bg-[var(--accent)] hover:text-black transition-all btn-glitch\">\r\n            Enter Vault\r\n        </button>\r\n    </div>\r\n\r\n    \r\n    <div class=\"curtain-iris\" id=\"iris\"></div>\r\n\r\n    \r\n    <div id=\"viewport\" class=\"layer-fixed\">\r\n        <canvas id=\"three-canvas\"></canvas>\r\n    </div>\r\n\r\n    \r\n    <div id=\"hero-intro\" class=\"hero-intro pointer-events-auto\" aria-hidden=\"false\">\r\n        <div class=\"hero-intro-inner\">\r\n            <h2 class=\"hero-intro-title\">ASUS ROG STRIX SCAR 17 (2023) — G733</h2>\r\n            <p class=\"hero-intro-subtitle\">Interactive teardown · Ports · Display · Underside Airflow</p>\r\n            <div class=\"hero-intro-cta\">\r\n                <span class=\"hero-intro-cta-text\">SCROLL TO INSPECT</span>\r\n                <div class=\"hero-intro-indicator\" id=\"hero-intro-indicator\"></div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n    \r\n    <div id=\"hotspots-container\" aria-hidden=\"true\"></div>\r\n    <div id=\"hotspot-crosshair\" class=\"hotspot-crosshair\" style=\"display:none;\" aria-hidden=\"true\"></div>\r\n\r\n    \r\n    <div id=\"scroll-track\">\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-1\" data-idx=\"1\">\r\n            <div class=\"scene-content items-start\">\r\n                <div class=\"scene-text max-w-xl\">\r\n                    <div class=\"text-[var(--accent)] text-xs font-mono mb-4\">ARTIFACT_ID: X1-PROTO</div>\r\n                    <h1 class=\"text-6xl md:text-8xl font-display font-bold leading-none mb-6\">\r\n                        BEYOND<br>MATTER\r\n                    </h1>\r\n                    <p class=\"text-gray-400 font-mono text-sm leading-relaxed\">\r\n                        El artefacto ha sido recuperado. Materiales desconocidos. \r\n                        Potencia de cálculo ilimitada. Bienvenido al Vault.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-2\" data-idx=\"2\">\r\n            <div class=\"scene-content items-end text-right\">\r\n                <div class=\"scene-text max-w-lg\">\r\n                    <div class=\"text-[var(--accent)] text-xs font-mono mb-4\">CORE STATUS: UNSTABLE</div>\r\n                    <h2 class=\"text-5xl md:text-7xl font-display font-bold mb-6\">\r\n                        OVER<br>CLOCK\r\n                    </h2>\r\n                    <div class=\"grid grid-cols-2 gap-4 font-mono text-xs text-gray-400\">\r\n                        <div class=\"border-t border-white/20 pt-2\">\r\n                            <span class=\"block text-white text-xl\">5.2 GHz</span>\r\n                            FREQUENCY\r\n                        </div>\r\n                        <div class=\"border-t border-white/20 pt-2\">\r\n                            <span class=\"block text-white text-xl\">128 GB</span>\r\n                            MEMORY BANK\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-3\" data-idx=\"3\">\r\n            <div class=\"scene-content items-center text-center\">\r\n                <div class=\"scene-text\">\r\n                    <h2 class=\"text-4xl font-bold mb-4\">AEROSPACE GRADE</h2>\r\n                    <p class=\"text-sm font-mono opacity-60\">Titanium Alloy Chassis. Zero-G cooling.</p>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-ports\" data-idx=\"ports\">\r\n            <div class=\"scene-content items-end text-right\">\r\n                <div class=\"scene-text max-w-lg\">\r\n                    <h2 class=\"text-4xl md:text-6xl font-display font-bold mb-4\">REAR I/O</h2>\r\n                    <p class=\"text-[var(--accent)] text-xs font-mono mb-4\">Left I/O · High-throughput</p>\r\n                    <div class=\"spec-panel text-left\">\r\n                        <h3>I/O PORTS — SCAR 17 G733</h3>\r\n                        <ul>\r\n                            <li>1× 3.5mm Combo Audio Jack</li>\r\n                            <li>1× HDMI 2.1 FRL</li>\r\n                            <li>2× USB 3.2 Gen 1 Type-A</li>\r\n                            <li>2× USB 3.2 Gen 2 Type-C (DP + G-SYNC; one w/ Power Delivery)</li>\r\n                            <li>1× 2.5G LAN</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-4\" data-idx=\"4\">\r\n            <div class=\"scene-content items-start\">\r\n                <div class=\"scene-text\">\r\n                    <h2 class=\"text-5xl font-display font-bold text-white drop-shadow-[0_0_20px_white]\">\r\n                        17.3\" WQHD 240Hz\r\n                    </h2>\r\n                    <p class=\"text-sm font-mono mt-4\">100% DCI-P3 · G-SYNC · MUX + Advanced Optimus</p>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-display-detail\" data-idx=\"display-detail\">\r\n            <div class=\"scene-content items-start\">\r\n                <div class=\"scene-text max-w-lg\">\r\n                    <h2 class=\"text-3xl md:text-5xl font-display font-bold mb-4\">DISPLAY / PANEL</h2>\r\n                    <div class=\"spec-panel\">\r\n                        <h3>Panel — SCAR 17 G733</h3>\r\n                        <ul>\r\n                            <li>17.3\" WQHD 2560×1440 · 240Hz · 3ms</li>\r\n                            <li>IPS-level · Anti-glare</li>\r\n                            <li>100% DCI-P3 · G-SYNC</li>\r\n                            <li>MUX Switch + NVIDIA Advanced Optimus</li>\r\n                        </ul>\r\n                        <h3 class=\"mt-4\">Panel Diagnostics</h3>\r\n                        <ul>\r\n                            <li>Refresh: 240Hz active</li>\r\n                            <li>Response: 3ms G2G</li>\r\n                            <li>Color: DCI-P3 calibrated</li>\r\n                            <li>Sync: G-SYNC compatible</li>\r\n                            <li>MUX: Discrete GPU direct</li>\r\n                        </ul>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-5\" data-idx=\"5\">\r\n            <div class=\"scene-content items-center justify-center\">\r\n                <div class=\"scene-text bg-black/80 p-8 border border-[var(--accent)] backdrop-blur-sm\">\r\n                    <h2 class=\"text-3xl font-bold text-[var(--accent)] mb-2\">EXPLODED VIEW</h2>\r\n                    <ul class=\"text-xs font-mono space-y-2\">\r\n                        <li>> MOBO: Z-LAYER 1</li>\r\n                        <li>> BATTERY: Z-LAYER 2</li>\r\n                        <li>> COOLING: VAPOR CHAMBER</li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene\" id=\"scene-undercarriage\" data-idx=\"undercarriage\">\r\n            <div class=\"scene-content items-end text-right\">\r\n                <div class=\"scene-text max-w-lg\">\r\n                    <h2 class=\"text-4xl md:text-6xl font-display font-bold mb-4\">UNDERSIDE</h2>\r\n                    <p class=\"text-[var(--accent)] text-xs font-mono mb-4\">ROG Intelligent Cooling</p>\r\n                    <div class=\"spec-panel text-left\">\r\n                        <h3>Airflow — Arc Flow · Thermal</h3>\r\n                        <ul>\r\n                            <li>Arc Flow Fans · Self-cleaning</li>\r\n                            <li>Ultra-thin fins 0.1mm · Anti-dust tunnels</li>\r\n                            <li>Heatpipes + thermal module</li>\r\n                            <li>Intake → fans → exhaust</li>\r\n                        </ul>\r\n                        <div class=\"airflow-hud\">\r\n                            <span>INTAKE</span>\r\n                            <span class=\"arrow\"></span>\r\n                            <span>FANS</span>\r\n                            <span class=\"arrow\"></span>\r\n                            <span>EXHAUST</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n        \r\n        <section class=\"scene h-screen flex items-center justify-center\" id=\"scene-6\" data-idx=\"6\">\r\n            <div class=\"scene-content items-center text-center z-[500] pointer-events-auto\">\r\n                <h2 class=\"text-6xl md:text-9xl font-display font-bold mb-8\">VERDICT</h2>\r\n                <button class=\"px-12 py-4 bg-[var(--accent)] text-black font-bold text-xl tracking-widest uppercase hover:scale-105 transition-transform\">\r\n                    Acquire Asset\r\n                </button>\r\n                <div class=\"mt-8 flex gap-8 text-xs font-mono text-gray-500\">\r\n                    <a href=\"#\" class=\"hover:text-white underline\">Replay Cinematic</a>\r\n                    <a href=\"#\" class=\"hover:text-white underline\">Download Specs</a>\r\n                </div>\r\n            </div>\r\n        </section>\r\n\r\n    </div>";

function App() {
  const rootRef = useRef(null);

  useEffect(() => {
    const checkAndLoad = () => {
      if (typeof window.gsap === 'undefined' || typeof window.ScrollTrigger === 'undefined') return;
      if (window.__vaultAppLoaded) return;
      window.__vaultAppLoaded = true;

      const script = document.createElement('script');
      script.type = 'module';
      // Usar BASE_URL de Vite para que funcione con GitHub Pages
      const baseUrl = import.meta.env.BASE_URL;
      script.src = `${baseUrl}vault-app.js`.replace(/\/\//g, '/'); // Evitar doble slash
      script.onload = () => console.log('✓ vault-app.js cargado');
      script.onerror = (e) => console.error('✗ Error cargando vault-app.js', e);
      document.body.appendChild(script);
    };

    const t = setInterval(checkAndLoad, 100);
    const timeout = setTimeout(() => { clearInterval(t); }, 12000);
    return () => { clearInterval(t); clearTimeout(timeout); };
  }, []);

  return <div ref={rootRef} id="app-root" className="app-root" dangerouslySetInnerHTML={{ __html: BODY_HTML }} />;
}

export default App;
